{"version":3,"file":"BasePicker.js","sourceRoot":"../src/","sources":["components/pickers/BasePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Async,\n  KeyCodes,\n  css,\n  elementContains,\n  format,\n  getId,\n  classNamesFunction,\n  styled,\n  initializeComponentRef,\n  IStyleFunctionOrObject,\n} from '../../Utilities';\nimport { Callout } from '../../Callout';\nimport { Selection, SelectionZone, SelectionMode } from '../../utilities/selection/index';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { Suggestions } from './Suggestions/Suggestions';\nimport { getStyles as suggestionsStyles } from './Suggestions/Suggestions.styles';\nimport { SuggestionsController } from './Suggestions/SuggestionsController';\nimport { ValidationState } from './BasePicker.types';\nimport { Autofill } from '../Autofill/index';\nimport * as stylesImport from './BasePicker.scss';\nimport { Label } from '../../Label';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport type {\n  ISuggestions,\n  ISuggestionsProps,\n  ISuggestionsStyleProps,\n  ISuggestionsStyles,\n} from './Suggestions/Suggestions.types';\nimport type { IBasePicker, IBasePickerProps, IBasePickerStyleProps, IBasePickerStyles } from './BasePicker.types';\nimport type { IAutofill } from '../Autofill/index';\nimport type { IPickerItemProps } from './PickerItem.types';\nimport { WindowContext } from '@fluentui/react-window-provider';\nimport { getDocumentEx } from '../../utilities/dom';\nimport type { ILabelStyleProps, ILabelStyles } from '../../Label';\n\nconst legacyStyles: any = stylesImport;\n\nconst EXTENDED_LOAD_TIME = 3000;\n\nexport interface IBasePickerState<T> {\n  items?: any;\n  suggestedDisplayValue?: string;\n  moreSuggestionsAvailable?: boolean;\n  isFocused?: boolean;\n  isSearching?: boolean;\n  isMostRecentlyUsedVisible?: boolean;\n  suggestionsVisible?: boolean;\n  suggestionsLoading?: boolean;\n  suggestionsExtendedLoading?: boolean;\n  isResultsFooterVisible?: boolean;\n  selectedIndices?: number[];\n  selectionRemoved?: T;\n  errorMessage?: string | JSX.Element;\n}\n\n/**\n * Aria id's for internal picker components\n * {@docCategory Pickers}\n */\nexport type IPickerAriaIds = {\n  /**\n   * Aria id for selected suggestion alert component\n   */\n  selectedSuggestionAlert: string;\n  /**\n   * Aria id for selected items container component\n   */\n  selectedItems: string;\n  /**\n   * Aria id for suggestions list component\n   */\n  suggestionList: string;\n  /**\n   * Aria id for element with role=combobox\n   */\n  combobox: string;\n  /**\n   * Aria id for error message component\n   */\n  error: string;\n};\n\nconst getClassNames = classNamesFunction<IBasePickerStyleProps, IBasePickerStyles>();\n\n/**\n * Should be removed once new picker without inheritance is created\n */\nfunction getStyledSuggestions<T>(suggestionsType: new (props: ISuggestionsProps<T>) => Suggestions<T>) {\n  return styled<ISuggestionsProps<any>, ISuggestionsStyleProps, ISuggestionsStyles>(\n    suggestionsType,\n    suggestionsStyles,\n    undefined,\n    {\n      scope: 'Suggestions',\n    },\n  );\n}\n\n/**\n * {@docCategory Pickers}\n */\nexport class BasePicker<T extends {}, P extends IBasePickerProps<T>>\n  extends React.Component<P, IBasePickerState<T>>\n  implements IBasePicker<T>\n{\n  public static contextType = WindowContext;\n\n  // Refs\n  protected root = React.createRef<HTMLDivElement>();\n  protected input = React.createRef<IAutofill>();\n  protected suggestionElement = React.createRef<ISuggestions<T>>();\n  protected selection: Selection;\n  protected suggestionStore: SuggestionsController<T>;\n  /**\n   * @deprecated this is no longer necessary as typescript now supports generic elements\n   */\n  protected SuggestionOfProperType = Suggestions as new (props: ISuggestionsProps<T>) => Suggestions<T>;\n  protected currentPromise: PromiseLike<any> | undefined;\n  protected _ariaMap: IPickerAriaIds;\n  // eslint-disable-next-line @typescript-eslint/no-deprecated\n  private _styledSuggestions = getStyledSuggestions(this.SuggestionOfProperType);\n  private _id: string;\n  private _async: Async;\n  private _isMounted: boolean = false;\n  private _onResolveSuggestionsDebounced: (updatedValue: string) => void;\n  private _overrideScrollDismiss = false;\n  private _overrideScrollDimissTimeout: number;\n\n  public static getDerivedStateFromProps(newProps: IBasePickerProps<any>) {\n    if (newProps.selectedItems) {\n      return { items: newProps.selectedItems };\n    }\n    return null;\n  }\n\n  constructor(basePickerProps: P) {\n    super(basePickerProps);\n\n    initializeComponentRef(this);\n\n    const items: T[] = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n\n    this._id = getId();\n    this._ariaMap = {\n      selectedItems: `selected-items-${this._id}`,\n      selectedSuggestionAlert: `selected-suggestion-alert-${this._id}`,\n      suggestionList: `suggestion-list-${this._id}`,\n      combobox: `combobox-${this._id}`,\n      error: `error-${this._id}`,\n    };\n    this.suggestionStore = new SuggestionsController<T>();\n    this.selection = new Selection({ onSelectionChanged: () => this.onSelectionChange() });\n    this.selection.setItems(items);\n    this.state = {\n      items,\n      suggestedDisplayValue: '',\n      isMostRecentlyUsedVisible: false,\n      moreSuggestionsAvailable: false,\n      isFocused: false,\n      isSearching: false,\n      selectedIndices: [],\n      selectionRemoved: undefined,\n    };\n  }\n\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  public componentDidMount(): void {\n    this._isMounted = true;\n    this._async = new Async(this);\n    this._updateErrorMessage(this.state.items);\n    this.selection.setItems(this.state.items);\n    this._onResolveSuggestionsDebounced = this._async.debounce(this._onResolveSuggestions, this.props.resolveDelay);\n  }\n\n  public componentDidUpdate(oldProps: P, oldState: IBasePickerState<T>) {\n    if (this.state.items && this.state.items !== oldState.items) {\n      const currentSelectedIndex = this.selection.getSelectedIndices()[0];\n      this.selection.setItems(this.state.items);\n      if (this.state.isFocused) {\n        // Reset focus and selection so that selected item stays in sync if something\n        // has been removed\n        if (this.state.items.length < oldState.items.length) {\n          this.selection.setIndexSelected(currentSelectedIndex, false, true);\n          this.resetFocus(currentSelectedIndex);\n        }\n        // Reset focus to last item if the input is removed\n        else if (this.state.items.length > oldState.items.length && !this.canAddItems()) {\n          this.resetFocus(this.state.items.length - 1);\n        }\n      }\n    }\n\n    this._updateErrorMessage(this.state.items);\n\n    // handle dismiss buffer after suggestions are opened\n    if (this.state.suggestionsVisible && !oldState.suggestionsVisible) {\n      this._overrideScrollDismiss = true;\n      this._async.clearTimeout(this._overrideScrollDimissTimeout);\n      this._overrideScrollDimissTimeout = this._async.setTimeout(() => {\n        this._overrideScrollDismiss = false;\n      }, 100);\n    }\n  }\n\n  public componentWillUnmount(): void {\n    this._isMounted = false;\n    if (this.currentPromise) {\n      this.currentPromise = undefined;\n    }\n    this._async.dispose();\n  }\n\n  public focus() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public focusInput() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public dismissSuggestions = (ev?: any): void => {\n    const selectItemFunction = () => {\n      let addItemOnDismiss: boolean | void = true;\n      if (this.props.onDismiss) {\n        addItemOnDismiss = this.props.onDismiss(\n          ev,\n          this.suggestionStore.currentSuggestion ? this.suggestionStore.currentSuggestion.item : undefined,\n        );\n      }\n\n      if (!ev || (ev && !ev.defaultPrevented)) {\n        // Select the first suggestion if one is available and permitted by onDismiss when user leaves.\n        if (\n          addItemOnDismiss !== false &&\n          this.canAddItems() &&\n          this.suggestionStore.hasSelectedSuggestion() &&\n          this.state.suggestedDisplayValue\n        ) {\n          this.addItemByIndex(0);\n        }\n      }\n    };\n\n    if (this.currentPromise) {\n      this.currentPromise.then(() => selectItemFunction());\n    } else {\n      selectItemFunction();\n    }\n\n    this.setState({ suggestionsVisible: false });\n  };\n\n  public completeSuggestion(forceComplete?: boolean) {\n    if (this.suggestionStore.hasSelectedSuggestion() && this.input.current) {\n      this.completeSelection(this.suggestionStore.currentSuggestion!.item);\n    } else if (forceComplete) {\n      this._completeGenericSuggestion();\n    }\n  }\n\n  public refocusSuggestions = (keyCode: KeyCodes): void => {\n    this.resetFocus();\n    if (this.suggestionStore.suggestions && this.suggestionStore.suggestions.length > 0) {\n      if (keyCode === KeyCodes.up) {\n        this.suggestionStore.setSelectedSuggestion(this.suggestionStore.suggestions.length - 1);\n      } else if (keyCode === KeyCodes.down) {\n        this.suggestionStore.setSelectedSuggestion(0);\n      }\n    }\n  };\n\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused, items } = this.state;\n    const { className, inputProps, disabled, selectionAriaLabel, selectionRole = 'list', theme, styles } = this.props;\n\n    const suggestionsVisible = !!this.state.suggestionsVisible;\n    const suggestionsAvailable = suggestionsVisible ? this._ariaMap.suggestionList : undefined;\n    const hasError = !!(this.state.errorMessage ?? this.props.errorMessage);\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          disabled,\n          hasErrorMessage: hasError,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          error: 'ms-BasePicker-error',\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    const comboLabel = this.props['aria-label'] || inputProps?.['aria-label'];\n    const inputId = inputProps?.id ?? this._ariaMap.combobox;\n\n    // selectionAriaLabel is contained in a separate <span> rather than an aria-label on the items list\n    // because if the items list has an aria-label, the aria-describedby on the input will only read\n    // that label instead of all the selected items. Using aria-labelledby instead fixes this, since\n    // aria-describedby and aria-labelledby will not follow a second aria-labelledby\n    return (\n      <div\n        ref={this.root}\n        className={classNames.root}\n        onKeyDown={this.onKeyDown}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onClick={this.onWrapperClick}\n      >\n        {this.renderLabel(inputId, classNames.subComponentStyles?.label)}\n        {this.renderCustomAlert(classNames.screenReaderText)}\n        <span id={`${this._ariaMap.selectedItems}-label`} hidden>\n          {selectionAriaLabel || comboLabel}\n        </span>\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.multiple}>\n          <div className={classNames.text} aria-owns={suggestionsAvailable}>\n            {items.length > 0 && (\n              <span\n                id={this._ariaMap.selectedItems}\n                className={classNames.itemsWrapper}\n                role={selectionRole}\n                aria-labelledby={`${this._ariaMap.selectedItems}-label`}\n              >\n                {this.renderItems()}\n              </span>\n            )}\n            {this.canAddItems() && (\n              <Autofill\n                spellCheck={false}\n                {...(inputProps as any)}\n                className={classNames.input}\n                componentRef={this.input}\n                id={inputId}\n                onClick={this.onClick}\n                onFocus={this.onInputFocus}\n                onBlur={this.onInputBlur}\n                onInputValueChange={this.onInputChange}\n                suggestedDisplayValue={suggestedDisplayValue}\n                aria-activedescendant={suggestionsVisible ? this.getActiveDescendant() : undefined}\n                aria-controls={suggestionsAvailable}\n                aria-describedby={this._getDescribedBy(items, hasError)}\n                aria-expanded={suggestionsVisible}\n                aria-haspopup=\"listbox\"\n                aria-label={comboLabel}\n                role=\"combobox\"\n                disabled={disabled}\n                onInputChange={this.props.onInputChange}\n              />\n            )}\n          </div>\n        </SelectionZone>\n        {this.renderError(classNames.error)}\n        {this.renderSuggestions()}\n      </div>\n    );\n  }\n\n  protected _getDescribedBy = (items: T[], hasError: boolean): string => {\n    let describedBy = '';\n    if (items.length > 0) {\n      describedBy += this._ariaMap.selectedItems + ' ';\n    }\n    if (hasError) {\n      describedBy += this._ariaMap.error;\n    }\n    return describedBy;\n  };\n\n  protected canAddItems(): boolean {\n    const { items } = this.state;\n    const { itemLimit } = this.props;\n    return itemLimit === undefined || items.length < itemLimit;\n  }\n\n  protected renderLabel(\n    inputId: string,\n    styles: IStyleFunctionOrObject<ILabelStyleProps, ILabelStyles> | undefined,\n  ): JSX.Element | null {\n    const { label, disabled, required } = this.props;\n    if (!label) {\n      return null;\n    }\n    return (\n      <Label className=\"ms-BasePicker-label\" styles={styles} disabled={disabled} required={required} htmlFor={inputId}>\n        {label}\n      </Label>\n    );\n  }\n\n  protected renderError(className?: string): JSX.Element | null {\n    const { errorMessage = this.state.errorMessage } = this.props;\n    if (!errorMessage) {\n      return null;\n    }\n    return (\n      <div role=\"alert\" id={this._ariaMap.error} className={className}>\n        {errorMessage}\n      </div>\n    );\n  }\n\n  protected renderSuggestions(): JSX.Element | null {\n    const StyledTypedSuggestions: React.FunctionComponent<ISuggestionsProps<T>> = this._styledSuggestions;\n\n    return this.state.suggestionsVisible && this.input ? (\n      <Callout\n        isBeakVisible={false}\n        gapSpace={5}\n        target={this.input.current ? this.input.current.inputElement : undefined}\n        onDismiss={this.dismissSuggestions}\n        directionalHint={DirectionalHint.bottomLeftEdge}\n        directionalHintForRTL={DirectionalHint.bottomRightEdge}\n        // eslint-disable-next-line react/jsx-no-bind\n        preventDismissOnEvent={(ev: Event) => this._preventDismissOnScrollOrResize(ev)}\n        {...this.props.pickerCalloutProps}\n      >\n        <StyledTypedSuggestions\n          // Assumed to set in derived component's defaultProps\n          onRenderSuggestion={this.props.onRenderSuggestionsItem!}\n          onSuggestionClick={this.onSuggestionClick}\n          onSuggestionRemove={this.onSuggestionRemove}\n          suggestions={this.suggestionStore.getSuggestions()}\n          componentRef={this.suggestionElement}\n          onGetMoreResults={this.onGetMoreResults}\n          moreSuggestionsAvailable={this.state.moreSuggestionsAvailable}\n          isLoading={this.state.suggestionsLoading}\n          isExtendedLoading={this.state.suggestionsExtendedLoading}\n          isSearching={this.state.isSearching}\n          isMostRecentlyUsedVisible={this.state.isMostRecentlyUsedVisible}\n          isResultsFooterVisible={this.state.isResultsFooterVisible}\n          refocusSuggestions={this.refocusSuggestions}\n          removeSuggestionAriaLabel={this.props.removeButtonAriaLabel}\n          suggestionsListId={this._ariaMap.suggestionList}\n          createGenericItem={this._completeGenericSuggestion}\n          {...this.props.pickerSuggestionsProps}\n        />\n      </Callout>\n    ) : null;\n  }\n\n  protected renderItems(): JSX.Element[] {\n    const { disabled, removeButtonAriaLabel, removeButtonIconProps } = this.props;\n    const onRenderItem = this.props.onRenderItem as (props: IPickerItemProps<T>) => JSX.Element;\n\n    const { items, selectedIndices } = this.state;\n    return items.map((item: any, index: number) =>\n      onRenderItem({\n        item,\n        index,\n        key: item.key ? item.key : index,\n        selected: selectedIndices!.indexOf(index) !== -1,\n        onRemoveItem: () => this.removeItem(item),\n        disabled,\n        onItemChange: this.onItemChange,\n        removeButtonAriaLabel,\n        removeButtonIconProps,\n      }),\n    );\n  }\n\n  protected resetFocus(index?: number) {\n    const { items } = this.state;\n\n    if (items.length) {\n      // default to focusing the last item\n      index = index ?? items.length - 1;\n      const newEl: HTMLElement | null =\n        this.root.current &&\n        (this.root.current.querySelectorAll('[data-selection-index] > button')[\n          Math.min(index!, items.length - 1)\n        ] as HTMLElement | null);\n      if (newEl) {\n        newEl.focus();\n      }\n    } else {\n      if (this.input.current) {\n        this.input.current.focus();\n      }\n    }\n  }\n\n  protected onSuggestionSelect() {\n    if (this.suggestionStore.currentSuggestion) {\n      const currentValue: string = this.input.current ? this.input.current.value : '';\n      const itemValue: string = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, currentValue);\n      this.setState({ suggestedDisplayValue: itemValue });\n    }\n  }\n\n  protected onSelectionChange() {\n    this.setState({\n      selectedIndices: this.selection.getSelectedIndices(),\n    });\n  }\n\n  protected updateSuggestions(suggestions: any[]) {\n    const maxSuggestionsCount = this.props.pickerSuggestionsProps?.resultsMaximumNumber;\n    this.suggestionStore.updateSuggestions(suggestions, 0, maxSuggestionsCount);\n    this.forceUpdate();\n  }\n\n  /**\n   * Only to be called when there is nothing in the input. Checks to see if the consumer has\n   * provided a function to resolve suggestions\n   */\n  protected onEmptyInputFocus() {\n    const emptyResolveSuggestions = this.props.onEmptyResolveSuggestions\n      ? this.props.onEmptyResolveSuggestions\n      : // eslint-disable-next-line @typescript-eslint/no-deprecated\n        this.props.onEmptyInputFocus;\n\n    // Only attempt to resolve suggestions if it exists\n    if (emptyResolveSuggestions) {\n      const suggestions = emptyResolveSuggestions(this.state.items);\n\n      this.updateSuggestionsList(suggestions);\n\n      this.setState({\n        isMostRecentlyUsedVisible: true,\n        suggestionsVisible: true,\n        moreSuggestionsAvailable: false,\n      });\n    }\n  }\n\n  protected updateValue(updatedValue: string) {\n    this._onResolveSuggestionsDebounced(updatedValue);\n  }\n\n  protected updateSuggestionsList(suggestions: T[] | PromiseLike<T[]>, updatedValue?: string) {\n    // Check to see if the returned value is an array, if it is then just pass it into the next function .\n    // If the returned value is not an array then check to see if it's a promise or PromiseLike.\n    // If it is then resolve it asynchronously.\n    if (Array.isArray(suggestions)) {\n      this._updateAndResolveValue(updatedValue, suggestions);\n    } else if (suggestions && (suggestions as PromiseLike<T[]>).then) {\n      this.setState({\n        suggestionsLoading: true,\n      });\n      this._startLoadTimer();\n\n      // Clear suggestions\n      this.suggestionStore.updateSuggestions([]);\n\n      if (updatedValue !== undefined) {\n        this.setState({\n          suggestionsVisible: this._getShowSuggestions(),\n        });\n      } else {\n        this.setState({\n          suggestionsVisible:\n            this.input.current! && this.input.current!.inputElement === getDocumentEx(this.context)?.activeElement,\n        });\n      }\n\n      // Ensure that the promise will only use the callback if it was the most recent one.\n      this.currentPromise = suggestions;\n      suggestions.then((newSuggestions: T[]) => {\n        if (suggestions === this.currentPromise) {\n          this._updateAndResolveValue(updatedValue, newSuggestions);\n        }\n      });\n    }\n  }\n\n  protected resolveNewValue(updatedValue: string, suggestions: T[]) {\n    this.updateSuggestions(suggestions);\n    let itemValue: string | undefined = undefined;\n\n    if (this.suggestionStore.currentSuggestion) {\n      itemValue = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, updatedValue);\n    }\n\n    // Only set suggestionloading to false after there has been time for the new suggestions to flow\n    // to the suggestions list. This is to ensure that the suggestions are available before aria-activedescendant\n    // is set so that screen readers will read out the first selected option.\n    this.setState(\n      {\n        suggestedDisplayValue: itemValue,\n        suggestionsVisible: this._getShowSuggestions(),\n      },\n      () => this.setState({ suggestionsLoading: false, suggestionsExtendedLoading: false }),\n    );\n  }\n\n  protected onChange(items?: T[]) {\n    if (this.props.onChange) {\n      (this.props.onChange as any)(items);\n    }\n  }\n\n  protected onInputChange = (value: string): void => {\n    this.updateValue(value);\n    this.setState({\n      moreSuggestionsAvailable: true,\n      isMostRecentlyUsedVisible: false,\n    });\n  };\n\n  protected onSuggestionClick = (ev: React.MouseEvent<HTMLElement>, item: any, index: number): void => {\n    this.addItemByIndex(index);\n  };\n\n  protected onSuggestionRemove = (ev: React.MouseEvent<HTMLElement>, item: T, index: number): void => {\n    if (this.props.onRemoveSuggestion) {\n      this.props.onRemoveSuggestion(item);\n    }\n    this.suggestionStore.removeSuggestion(index);\n  };\n\n  protected onInputFocus = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    this.selection.setAllSelected(false);\n    // Only trigger all of the focus if this component isn't already focused.\n    // For example when an item is selected or removed from the selected list it should be treated\n    // as though the input is still focused.\n    if (!this.state.isFocused) {\n      this._userTriggeredSuggestions();\n\n      if (this.props.inputProps && this.props.inputProps.onFocus) {\n        this.props.inputProps.onFocus(ev as React.FocusEvent<HTMLInputElement>);\n      }\n    }\n  };\n\n  protected onInputBlur = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    if (this.props.inputProps && this.props.inputProps.onBlur) {\n      this.props.inputProps.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n    }\n  };\n\n  protected onBlur = (ev: React.FocusEvent<HTMLElement | Autofill>): void => {\n    if (this.state.isFocused) {\n      // Only blur the entire component if an unrelated element gets focus.\n      // Otherwise treat it as though it still has focus.\n      // Do nothing if the blur is coming from something\n      // inside the comboBox root or the comboBox menu since\n      // it we are not really bluring from the whole comboBox\n      let relatedTarget: EventTarget | null = ev.relatedTarget;\n\n      if (ev.relatedTarget === null) {\n        // In IE11, due to lack of support, event.relatedTarget is always\n        // null making every onBlur call to be \"outside\" of the ComboBox\n        // even when it's not. Using document.activeElement is another way\n        // for us to be able to get what the relatedTarget without relying\n        // on the event\n        relatedTarget = getDocumentEx(this.context)!.activeElement;\n      }\n      if (relatedTarget && !elementContains(this.root.current!, relatedTarget as HTMLElement)) {\n        this.setState({ isFocused: false });\n        if (this.props.onBlur) {\n          this.props.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n        }\n      }\n    }\n  };\n\n  /**\n   * Resets focus to last element in wrapper div if clicking back into Picker that has hit item limit\n   */\n  protected onWrapperClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    if (this.state.items.length && !this.canAddItems()) {\n      this.resetFocus(this.state.items.length - 1);\n    }\n  };\n\n  /**\n   * Reveals suggestions any time the user clicks on the input element\n   * without shifting focus.\n   */\n  protected onClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    if (this.props.inputProps !== undefined && this.props.inputProps.onClick !== undefined) {\n      this.props.inputProps.onClick(ev);\n    }\n\n    // Only primary (left) clicks show suggestions.\n    if (ev.button === 0) {\n      this._userTriggeredSuggestions();\n    }\n  };\n\n  protected onFocus = () => {\n    if (!this.state.isFocused) {\n      this.setState({ isFocused: true });\n    }\n  };\n\n  protected onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const keyCode = ev.which;\n    switch (keyCode) {\n      case KeyCodes.escape:\n        if (this.state.suggestionsVisible) {\n          this.setState({ suggestionsVisible: false });\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n\n      case KeyCodes.tab:\n      case KeyCodes.enter:\n        if (this.suggestionElement.current && this.suggestionElement.current.hasSuggestedActionSelected()) {\n          this.suggestionElement.current.executeSelectedAction();\n        } else if (!ev.shiftKey && this.suggestionStore.hasSelectedSuggestion() && this.state.suggestionsVisible) {\n          this.completeSuggestion();\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else {\n          this._completeGenericSuggestion();\n        }\n\n        break;\n\n      case KeyCodes.backspace:\n        if (!this.props.disabled) {\n          this.onBackspace(ev);\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.del:\n        if (!this.props.disabled) {\n          if (\n            this.input.current &&\n            ev.target === this.input.current.inputElement &&\n            this.state.suggestionsVisible &&\n            this.suggestionStore.currentIndex !== -1\n          ) {\n            if (this.props.onRemoveSuggestion) {\n              this.props.onRemoveSuggestion(this.suggestionStore.currentSuggestion!.item);\n            }\n            this.suggestionStore.removeSuggestion(this.suggestionStore.currentIndex);\n            this.forceUpdate();\n          } else {\n            this.onBackspace(ev);\n          }\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.up:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex === 0\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusAboveSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.previousSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n\n      case KeyCodes.down:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex + 1 === this.suggestionStore.suggestions.length\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusBelowSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.nextSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n    }\n  };\n\n  protected onItemChange = (changedItem: T, index: number): void => {\n    const { items } = this.state;\n\n    if (index >= 0) {\n      const newItems: T[] = items;\n      newItems[index] = changedItem;\n\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected onGetMoreResults = (): void => {\n    this.setState(\n      {\n        isSearching: true,\n      },\n      () => {\n        if (this.props.onGetMoreResults && this.input.current) {\n          const suggestions: T[] | PromiseLike<T[]> = (this.props.onGetMoreResults as any)(\n            this.input.current.value,\n            this.state.items,\n          );\n          const suggestionsArray: T[] = suggestions as T[];\n          const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n          if (Array.isArray(suggestionsArray)) {\n            this.updateSuggestions(suggestionsArray);\n            this.setState({ isSearching: false });\n          } else if (suggestionsPromiseLike.then) {\n            suggestionsPromiseLike.then((newSuggestions: T[]) => {\n              this.updateSuggestions(newSuggestions);\n              this.setState({ isSearching: false });\n            });\n          }\n        } else {\n          this.setState({ isSearching: false });\n        }\n\n        if (this.input.current) {\n          this.input.current.focus();\n        }\n\n        this.setState({\n          moreSuggestionsAvailable: false,\n          isResultsFooterVisible: true,\n        });\n      },\n    );\n  };\n\n  protected completeSelection = (item: T) => {\n    this.addItem(item);\n    this.updateValue('');\n    if (this.input.current) {\n      this.input.current.clear();\n    }\n    this.setState({ suggestionsVisible: false });\n  };\n\n  protected addItemByIndex = (index: number): void => {\n    this.completeSelection(this.suggestionStore.getSuggestionAtIndex(index).item);\n  };\n\n  protected addItem = (item: T): void => {\n    const processedItem: T | PromiseLike<T> | null = this.props.onItemSelected\n      ? (this.props.onItemSelected as any)(item)\n      : item;\n\n    if (processedItem === null) {\n      return;\n    }\n\n    const processedItemObject: T = processedItem as T;\n    const processedItemPromiseLike: PromiseLike<T> = processedItem as PromiseLike<T>;\n\n    if (processedItemPromiseLike && processedItemPromiseLike.then) {\n      processedItemPromiseLike.then((resolvedProcessedItem: T) => {\n        const newItems: T[] = this.state.items.concat([resolvedProcessedItem]);\n        this._updateSelectedItems(newItems);\n      });\n    } else {\n      const newItems: T[] = this.state.items.concat([processedItemObject]);\n      this._updateSelectedItems(newItems);\n    }\n    this.setState({ suggestedDisplayValue: '', selectionRemoved: undefined });\n  };\n\n  protected removeItem = (item: T): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(item);\n\n    if (index >= 0) {\n      const newItems: T[] = items.slice(0, index).concat(items.slice(index + 1));\n      this.setState({ selectionRemoved: item });\n      this._updateSelectedItems(newItems);\n\n      // reset selection removed text after a timeout so it isn't reached by screen reader virtual cursor.\n      // the exact timing isn't important, the live region will fully read even if the text is removed.\n      this._async.setTimeout(() => {\n        this.setState({ selectionRemoved: undefined });\n      }, 1000);\n    }\n  };\n\n  protected removeItems = (itemsToRemove: any[]): void => {\n    const { items } = this.state;\n    const newItems: T[] = items.filter((item: any) => itemsToRemove.indexOf(item) === -1);\n\n    this._updateSelectedItems(newItems);\n  };\n\n  // This is protected because we may expect the backspace key to work differently in a different kind of picker.\n  // This lets the subclass override it and provide it's own onBackspace. For an example see the BasePickerListBelow\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    if (\n      (this.state.items.length && !this.input.current) ||\n      (this.input.current && !this.input.current.isValueSelected && this.input.current.cursorLocation === 0)\n    ) {\n      if (this.selection.getSelectedCount() > 0) {\n        this.removeItems(this.selection.getSelection());\n      } else {\n        this.removeItem(this.state.items[this.state.items.length - 1]);\n      }\n    }\n  }\n\n  /**\n   * @deprecated this is no longer necessary as focuszone has been removed\n   */\n  protected _shouldFocusZoneEnterInnerZone = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // If suggestions are shown const up/down keys control them, otherwise allow them through to control the focusZone.\n    if (this.state.suggestionsVisible) {\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      switch (ev.which) {\n        case KeyCodes.up:\n        case KeyCodes.down:\n          return true;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    if (ev.which === KeyCodes.enter) {\n      return true;\n    }\n\n    return false;\n  };\n\n  protected getActiveDescendant() {\n    if (this.state.suggestionsLoading) {\n      return undefined;\n    }\n\n    const currentIndex = this.suggestionStore.currentIndex;\n\n    if (currentIndex < 0) {\n      // if the suggestions element has actions and the currentIndex does not point to a suggestion,\n      // return the action id\n      if (this.suggestionElement.current?.hasSuggestedAction()) {\n        return 'sug-selectedAction';\n      }\n\n      // If there are no suggestions and no action suggested, then return the ID for the no results found.\n      if (this.suggestionStore.suggestions.length === 0) {\n        return 'sug-noResultsFound';\n      }\n\n      return undefined;\n    } else {\n      return `sug-${currentIndex}`;\n    }\n  }\n\n  /** @deprecated use renderCustomAlert instead */\n  protected getSuggestionsAlert(suggestionAlertClassName: string = legacyStyles.screenReaderOnly) {\n    const currentIndex = this.suggestionStore.currentIndex;\n    if (this.props.enableSelectedSuggestionAlert) {\n      const selectedSuggestion =\n        currentIndex > -1 ? this.suggestionStore.getSuggestionAtIndex(this.suggestionStore.currentIndex) : undefined;\n      const selectedSuggestionAlertText = selectedSuggestion ? selectedSuggestion.ariaLabel : undefined;\n      // keeping the id/className here for legacy support\n      return (\n        <div id={this._ariaMap.selectedSuggestionAlert} className={suggestionAlertClassName}>\n          {`${selectedSuggestionAlertText} `}\n        </div>\n      );\n    }\n  }\n\n  protected renderCustomAlert(alertClassName: string = legacyStyles.screenReaderOnly) {\n    const { suggestionRemovedText = 'removed {0}' } = this.props;\n    let removedItemText = '';\n\n    if (this.state.selectionRemoved) {\n      const itemName = this._getTextFromItem(this.state.selectionRemoved, '');\n      removedItemText = format(suggestionRemovedText, itemName);\n    }\n\n    return (\n      <div className={alertClassName} id={this._ariaMap.selectedSuggestionAlert} aria-live=\"assertive\">\n        {\n          // eslint-disable-next-line @typescript-eslint/no-deprecated\n          this.getSuggestionsAlert(alertClassName)\n        }\n        {removedItemText}\n      </div>\n    );\n  }\n\n  // do not dismiss if the window resizes or scrolls within 100ms of opening\n  // this prevents the Android issue where pickers immediately dismiss on open, because the keyboard appears\n  private _preventDismissOnScrollOrResize(ev: Event) {\n    if (this._overrideScrollDismiss && (ev.type === 'scroll' || ev.type === 'resize')) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /** If suggestions are still loading after a predefined amount of time, set state to show user alert */\n  private _startLoadTimer() {\n    this._async.setTimeout(() => {\n      if (this.state.suggestionsLoading) {\n        this.setState({ suggestionsExtendedLoading: true });\n      }\n    }, EXTENDED_LOAD_TIME);\n  }\n\n  /**\n   * Takes in the current updated value and either resolves it with the new suggestions\n   * or if updated value is undefined then it clears out currently suggested items\n   */\n  private _updateAndResolveValue(updatedValue: string | undefined, newSuggestions: T[]) {\n    if (updatedValue !== undefined) {\n      this.resolveNewValue(updatedValue, newSuggestions);\n    } else {\n      const maxSuggestionsCount = this.props.pickerSuggestionsProps?.resultsMaximumNumber;\n      this.suggestionStore.updateSuggestions(newSuggestions, -1, maxSuggestionsCount);\n      if (this.state.suggestionsLoading) {\n        this.setState({\n          suggestionsLoading: false,\n          suggestionsExtendedLoading: false,\n        });\n      }\n    }\n  }\n\n  private async _getErrorMessage(items: T[]): Promise<string | JSX.Element | undefined> {\n    if (this.props.errorMessage) {\n      return this.props.errorMessage;\n    }\n    if (this.props.onGetErrorMessage) {\n      try {\n        const errorMessage = this.props.onGetErrorMessage(items);\n        if (errorMessage) {\n          if ((errorMessage as PromiseLike<string | JSX.Element>).then) {\n            return await (errorMessage as PromiseLike<string | JSX.Element>);\n          } else {\n            return errorMessage as string | JSX.Element;\n          }\n        } else {\n          return undefined;\n        }\n      } catch (err) {\n        /* NO-OP */\n      }\n    }\n  }\n\n  private _updateErrorMessage(items: T[]): void {\n    let newErrorMessage: string | JSX.Element | undefined;\n    this._getErrorMessage(items)\n      .then(errorMessage => {\n        newErrorMessage = errorMessage;\n      })\n      .catch(() => {\n        /* NO-OP */\n      })\n      .finally(() => {\n        if (this._isMounted && newErrorMessage !== this.state.errorMessage) {\n          this.setState({ errorMessage: newErrorMessage });\n        }\n      });\n  }\n\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If `selectedItems` is provided, this will act as a controlled component and it will not update its own state.\n   */\n  private _updateSelectedItems(items: T[]): void {\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to add or remove the items.\n      this.onChange(items);\n    } else {\n      this.setState({ items }, () => {\n        this._updateErrorMessage(items);\n        this._onSelectedItemsUpdated(items);\n      });\n    }\n  }\n\n  private _onSelectedItemsUpdated(items?: T[]): void {\n    this.onChange(items);\n  }\n\n  /**\n   * Suggestions are normally shown after the user updates text and the text\n   * is non-empty, but also when the user clicks on the input element.\n   * @returns True if suggestions should be shown.\n   */\n  private _getShowSuggestions(): boolean {\n    const areSuggestionsVisible =\n      this.input.current !== undefined &&\n      this.input.current !== null &&\n      this.input.current.inputElement === getDocumentEx(this.context)?.activeElement &&\n      this.input.current.value !== '';\n\n    return areSuggestionsVisible;\n  }\n\n  private _onResolveSuggestions = (updatedValue: string): void => {\n    const suggestions: T[] | PromiseLike<T[]> | null = this.props.onResolveSuggestions(updatedValue, this.state.items);\n\n    if (suggestions !== null) {\n      this.updateSuggestionsList(suggestions, updatedValue);\n    }\n  };\n\n  private _completeGenericSuggestion = (): void => {\n    if (\n      this.props.onValidateInput &&\n      this.input.current &&\n      (this.props.onValidateInput as any)(this.input.current.value) !== ValidationState.invalid &&\n      this.props.createGenericItem\n    ) {\n      const itemToConvert = this.props.createGenericItem(\n        this.input.current.value,\n        this.props.onValidateInput(this.input.current.value),\n      );\n      this.suggestionStore.createGenericSuggestion(itemToConvert);\n      this.completeSuggestion();\n    }\n  };\n\n  private _getTextFromItem(item: T, currentValue?: string): string {\n    if (this.props.getTextFromItem) {\n      return (this.props.getTextFromItem as any)(item, currentValue);\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * This should be called when the user does something other than use text entry to trigger suggestions.\n   *\n   */\n  private _userTriggeredSuggestions = () => {\n    if (!this.state.suggestionsVisible) {\n      const input = this.input.current ? this.input.current.value : '';\n      if (!input) {\n        this.onEmptyInputFocus();\n      } else {\n        if (this.suggestionStore.suggestions.length === 0) {\n          this._onResolveSuggestionsDebounced(input);\n        } else {\n          this.setState({\n            isMostRecentlyUsedVisible: false,\n            suggestionsVisible: true,\n          });\n        }\n      }\n    }\n  };\n}\n\nexport class BasePickerListBelow<T extends {}, P extends IBasePickerProps<T>> extends BasePicker<T, P> {\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused, items } = this.state;\n    const { className, inputProps, disabled, selectionAriaLabel, selectionRole = 'list', theme, styles } = this.props;\n\n    const suggestionsVisible = !!this.state.suggestionsVisible;\n\n    const suggestionsAvailable: string | undefined = suggestionsVisible ? this._ariaMap.suggestionList : undefined;\n    const hasError = !!(this.state.errorMessage ?? this.props.errorMessage);\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          disabled,\n          hasErrorMessage: hasError,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', legacyStyles.picker, className ? className : ''),\n          error: 'ms-BasePicker-error',\n          text: css(\n            'ms-BasePicker-text',\n            legacyStyles.pickerText,\n            this.state.isFocused && legacyStyles.inputFocused,\n            disabled && legacyStyles.inputDisabled,\n          ),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    const comboLabel = this.props['aria-label'] || inputProps?.['aria-label'];\n    const inputId = inputProps?.id ?? this._ariaMap.combobox;\n\n    return (\n      <div ref={this.root} onBlur={this.onBlur} onFocus={this.onFocus}>\n        {this.renderLabel(inputId, classNames.subComponentStyles?.label)}\n        <div className={classNames.root} onKeyDown={this.onKeyDown}>\n          {this.renderCustomAlert(classNames.screenReaderText)}\n          <span id={`${this._ariaMap.selectedItems}-label`} hidden>\n            {selectionAriaLabel || comboLabel}\n          </span>\n          <div className={classNames.text} aria-owns={suggestionsAvailable}>\n            <Autofill\n              {...(inputProps as any)}\n              className={classNames.input}\n              componentRef={this.input}\n              onFocus={this.onInputFocus}\n              onBlur={this.onInputBlur}\n              onClick={this.onClick}\n              onInputValueChange={this.onInputChange}\n              suggestedDisplayValue={suggestedDisplayValue}\n              aria-activedescendant={suggestionsVisible ? this.getActiveDescendant() : undefined}\n              aria-controls={suggestionsAvailable}\n              aria-expanded={suggestionsVisible}\n              aria-haspopup=\"listbox\"\n              aria-label={comboLabel}\n              aria-describedby={this._getDescribedBy(items, hasError)}\n              role=\"combobox\"\n              id={inputId}\n              disabled={disabled}\n              onInputChange={this.props.onInputChange}\n            />\n          </div>\n        </div>\n        {this.renderSuggestions()}\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.single}>\n          <div\n            id={this._ariaMap.selectedItems}\n            className=\"ms-BasePicker-selectedItems\" // just a className hook without any styles applied to it.\n            role={selectionRole}\n            aria-labelledby={`${this._ariaMap.selectedItems}-label`}\n          >\n            {this.renderItems()}\n          </div>\n        </SelectionZone>\n        {this.renderError(classNames.error)}\n      </div>\n    );\n  }\n\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    // override the existing backspace method to not do anything because the list items appear below.\n  }\n}\n"]}