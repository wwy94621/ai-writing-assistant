{"version":3,"file":"FocusZone.js","sourceRoot":"../src/","sources":["components/FocusZone/FocusZone.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { FocusZoneDirection, FocusZoneTabbableElements } from './FocusZone.types';\nimport {\n  KeyCodes,\n  css,\n  elementContains,\n  getDocument,\n  getElementIndexPath,\n  getFocusableByIndexPath,\n  getId,\n  getNativeProps,\n  getNextElement,\n  getParent,\n  getPreviousElement,\n  getRTL,\n  htmlElementProperties,\n  initializeComponentRef,\n  isElementFocusSubZone,\n  isElementFocusZone,\n  isElementTabbable,\n  shouldWrapFocus,\n  warnDeprecations,\n  portalContainsElement,\n  findScrollableParent,\n  createMergedRef,\n  isElementVisibleAndNotHidden,\n  MergeStylesShadowRootContext,\n} from '@fluentui/utilities';\nimport { mergeStyles } from '@fluentui/merge-styles';\nimport { getTheme } from '@fluentui/style-utilities';\nimport type { IFocusZone, IFocusZoneProps } from './FocusZone.types';\nimport type { Point } from '@fluentui/utilities';\nimport type { ITheme } from '@fluentui/style-utilities';\n\nconst IS_FOCUSABLE_ATTRIBUTE = 'data-is-focusable';\nconst IS_ENTER_DISABLED_ATTRIBUTE = 'data-disable-click-on-enter';\nconst FOCUSZONE_ID_ATTRIBUTE = 'data-focuszone-id';\nconst TABINDEX = 'tabindex';\nconst NO_VERTICAL_WRAP = 'data-no-vertical-wrap';\nconst NO_HORIZONTAL_WRAP = 'data-no-horizontal-wrap';\nconst LARGE_DISTANCE_FROM_CENTER = 999999999;\nconst LARGE_NEGATIVE_DISTANCE_FROM_CENTER = -999999999;\n\nlet focusZoneStyles: string;\n\nconst focusZoneClass: string = 'ms-FocusZone';\n\n/**\n * Raises a click on a target element based on a keyboard event.\n */\nfunction raiseClickFromKeyboardEvent(target: Element, ev?: React.KeyboardEvent<HTMLElement>): void {\n  let event;\n  if (typeof MouseEvent === 'function') {\n    event = new MouseEvent('click', {\n      ctrlKey: ev?.ctrlKey,\n      metaKey: ev?.metaKey,\n      shiftKey: ev?.shiftKey,\n      altKey: ev?.altKey,\n      bubbles: ev?.bubbles,\n      cancelable: ev?.cancelable,\n    });\n  } else {\n    // eslint-disable-next-line no-restricted-globals\n    event = document.createEvent('MouseEvents');\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    event.initMouseEvent(\n      'click',\n      ev ? ev.bubbles : false,\n      ev ? ev.cancelable : false,\n      // eslint-disable-next-line no-restricted-globals\n      window, // not using getWindow() since this can only be run client side\n      0, // detail\n      0, // screen x\n      0, // screen y\n      0, // client x\n      0, // client y\n      ev ? ev.ctrlKey : false,\n      ev ? ev.altKey : false,\n      ev ? ev.shiftKey : false,\n      ev ? ev.metaKey : false,\n      0, // button\n      null, // relatedTarget\n    );\n  }\n\n  target.dispatchEvent(event);\n}\n\n// Helper function that will return a class for when the root is focused\nfunction getRootClass(): string {\n  if (!focusZoneStyles) {\n    focusZoneStyles = mergeStyles(\n      {\n        selectors: {\n          ':focus': {\n            outline: 'none',\n          },\n        },\n      },\n      focusZoneClass,\n    );\n  }\n  return focusZoneStyles;\n}\n\nconst _allInstances: {\n  [key: string]: FocusZone;\n} = {};\nconst _outerZones: Set<FocusZone> = new Set();\n\nconst ALLOWED_INPUT_TYPES = ['text', 'number', 'password', 'email', 'tel', 'url', 'search', 'textarea'];\n\nconst ALLOW_VIRTUAL_ELEMENTS = false;\n\ninterface IFocusZonePropsWithTabster extends IFocusZoneProps {\n  'data-tabster': string;\n}\n\nexport class FocusZone extends React.Component<IFocusZoneProps> implements IFocusZone {\n  public static contextType = MergeStylesShadowRootContext;\n\n  public static defaultProps: IFocusZoneProps = {\n    isCircularNavigation: false,\n    direction: FocusZoneDirection.bidirectional,\n    shouldRaiseClicks: true,\n    // Hardcoding uncontrolled flag for proper interop with FluentUI V9.\n    'data-tabster': '{\"uncontrolled\": {}}',\n  } as IFocusZonePropsWithTabster;\n\n  private _root: React.RefObject<HTMLElement> = React.createRef();\n  private _mergedRef = createMergedRef<HTMLElement>();\n\n  private _id: string;\n\n  /** The most recently focused child element. */\n  private _activeElement: HTMLElement | null;\n\n  /**\n   * The index path to the last focused child element.\n   */\n  private _lastIndexPath: number[] | undefined;\n\n  /**\n   * Flag to define when we've intentionally parked focus on the root element to temporarily\n   * hold focus until items appear within the zone.\n   */\n  private _isParked: boolean;\n\n  /** The child element with tabindex=0. */\n  private _defaultFocusElement: HTMLElement | null;\n  private _focusAlignment: Point;\n  private _isInnerZone: boolean;\n  private _parkedTabIndex: string | null | undefined;\n\n  /** Used to allow moving to next focusable element even when we're focusing on a input element when pressing tab */\n  private _processingTabKey: boolean;\n\n  /** Provides granular control over `shouldRaiseClicks` and should be preferred over `props.shouldRaiseClicks`. */\n  private _shouldRaiseClicksOnEnter: boolean;\n  private _shouldRaiseClicksOnSpace: boolean;\n\n  private _inShadowRoot: boolean;\n\n  /** Used for testing purposes only. */\n  public static getOuterZones(): number {\n    return _outerZones.size;\n  }\n\n  /**\n   * Handle global tab presses so that we can patch tabindexes on the fly.\n   * HEADS UP: This must not be an arrow function in order to be referentially equal among instances\n   * for ref counting to work correctly!\n   */\n  private static _onKeyDownCapture(ev: KeyboardEvent): void {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated, @fluentui/deprecated-keyboard-event-props\n    if (ev.which === KeyCodes.tab) {\n      _outerZones.forEach((zone: FocusZone) => zone._updateTabIndexes());\n    }\n  }\n\n  constructor(props: IFocusZoneProps) {\n    super(props);\n    // Manage componentRef resolution.\n    initializeComponentRef(this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecations('FocusZone', props, {\n        rootProps: undefined,\n        allowTabKey: 'handleTabKey',\n        elementType: 'as',\n        ariaDescribedBy: 'aria-describedby',\n        ariaLabelledBy: 'aria-labelledby',\n      });\n    }\n\n    this._id = getId('FocusZone');\n\n    this._focusAlignment = {\n      left: 0,\n      top: 0,\n    };\n\n    this._processingTabKey = false;\n\n    const shouldRaiseClicksFallback = props.shouldRaiseClicks ?? FocusZone.defaultProps.shouldRaiseClicks ?? true;\n    this._shouldRaiseClicksOnEnter = props.shouldRaiseClicksOnEnter ?? shouldRaiseClicksFallback;\n    this._shouldRaiseClicksOnSpace = props.shouldRaiseClicksOnSpace ?? shouldRaiseClicksFallback;\n  }\n\n  public componentDidMount(): void {\n    const { current: root } = this._root;\n\n    this._inShadowRoot = !!this.context?.shadowRoot;\n\n    _allInstances[this._id] = this;\n\n    if (root) {\n      let parentElement = getParent(root, ALLOW_VIRTUAL_ELEMENTS);\n\n      while (parentElement && parentElement !== this._getDocument().body && parentElement.nodeType === 1) {\n        if (isElementFocusZone(parentElement)) {\n          this._isInnerZone = true;\n          break;\n        }\n        parentElement = getParent(parentElement, ALLOW_VIRTUAL_ELEMENTS);\n      }\n\n      if (!this._isInnerZone) {\n        _outerZones.add(this);\n\n        this._root.current && this._root.current.addEventListener('keydown', FocusZone._onKeyDownCapture, true);\n      }\n\n      this._root.current && this._root.current.addEventListener('blur', this._onBlur, true);\n\n      // Assign initial tab indexes so that we can set initial focus as appropriate.\n      this._updateTabIndexes();\n\n      if (this.props.defaultTabbableElement && typeof this.props.defaultTabbableElement === 'string') {\n        this._activeElement = this._getDocument().querySelector(this.props.defaultTabbableElement) as HTMLElement;\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n      } else if (this.props.defaultActiveElement) {\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n        this._activeElement = this._getDocument().querySelector(this.props.defaultActiveElement) as HTMLElement;\n      }\n\n      if (this.props.shouldFocusOnMount) {\n        this.focus();\n      }\n    }\n  }\n\n  public componentDidUpdate(): void {\n    const { current: root } = this._root;\n    const doc = this._getDocument();\n    this._inShadowRoot = !!this.context?.shadowRoot;\n\n    // If either _activeElement or _defaultFocusElement are no longer contained by _root,\n    // reset those variables (and update tab indexes) to avoid memory leaks\n    if (\n      (this._activeElement && !elementContains(this._root.current, this._activeElement, ALLOW_VIRTUAL_ELEMENTS)) ||\n      (this._defaultFocusElement &&\n        !elementContains(this._root.current, this._defaultFocusElement, ALLOW_VIRTUAL_ELEMENTS))\n    ) {\n      this._activeElement = null;\n      this._defaultFocusElement = null;\n      this._updateTabIndexes();\n    }\n\n    if (\n      !this.props.preventFocusRestoration &&\n      doc &&\n      this._lastIndexPath &&\n      (doc.activeElement === doc.body || doc.activeElement === null || doc.activeElement === root)\n    ) {\n      // The element has been removed after the render, attempt to restore focus.\n      const elementToFocus = getFocusableByIndexPath(root as HTMLElement, this._lastIndexPath);\n\n      if (elementToFocus) {\n        this._setActiveElement(elementToFocus, true);\n        elementToFocus.focus();\n        this._setParkedFocus(false);\n      } else {\n        // We had a focus path to restore, but now that path is unresolvable. Park focus\n        // on the container until we can try again.\n        this._setParkedFocus(true);\n      }\n    }\n  }\n\n  public componentWillUnmount(): void {\n    delete _allInstances[this._id];\n\n    if (!this._isInnerZone) {\n      _outerZones.delete(this);\n\n      this._root.current && this._root.current.removeEventListener('keydown', FocusZone._onKeyDownCapture, true);\n    }\n\n    if (this._root.current) {\n      this._root.current.removeEventListener('blur', this._onBlur, true);\n    }\n\n    this._activeElement = null;\n    this._defaultFocusElement = null;\n  }\n\n  public render(): React.ReactNode {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const { as: tag, elementType, rootProps, ariaDescribedBy, ariaLabelledBy, className } = this.props;\n    const divProps = getNativeProps(this.props, htmlElementProperties);\n\n    const Tag = tag || elementType || 'div';\n\n    // Note, right before rendering/reconciling proceeds, we need to record if focus\n    // was in the zone before the update. This helper will track this and, if focus\n    // was actually in the zone, what the index path to the element is at this time.\n    // Then, later in componentDidUpdate, we can evaluate if we need to restore it in\n    // the case the element was removed.\n    this._evaluateFocusBeforeRender();\n\n    // Only support RTL defined in global theme, not contextual theme/RTL.\n    const theme: ITheme = getTheme();\n\n    return (\n      <Tag\n        aria-labelledby={ariaLabelledBy}\n        aria-describedby={ariaDescribedBy}\n        {...divProps}\n        {\n          // root props has been deprecated and should get removed.\n          // it needs to be marked as \"any\" since root props expects a div element, but really Tag can\n          // be any native element so typescript rightly flags this as a problem.\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          ...(rootProps as any)\n        }\n        // Once the getClassName correctly memoizes inputs this should\n        // be replaced so that className is passed to getRootClass and is included there so\n        // the class names will always be in the same order.\n        className={css(getRootClass(), className)}\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n        ref={this._mergedRef(this.props.elementRef, this._root)}\n        data-focuszone-id={this._id}\n        // eslint-disable-next-line react/jsx-no-bind\n        onKeyDown={(ev: React.KeyboardEvent<HTMLElement>) => this._onKeyDown(ev, theme)}\n        onFocus={this._onFocus}\n        onMouseDownCapture={this._onMouseDown}\n      >\n        {this.props.children}\n      </Tag>\n    );\n  }\n\n  /**\n   * Sets focus to the first tabbable item in the zone.\n   * @param forceIntoFirstElement - If true, focus will be forced into the first element, even\n   * if focus is already in the focus zone.\n   * @param bypassHiddenElements - If true, focus will be not be set on hidden elements.\n   * @returns True if focus could be set to an active element, false if no operation was taken.\n   */\n  public focus(forceIntoFirstElement: boolean = false, bypassHiddenElements: boolean = false): boolean {\n    if (this._root.current) {\n      if (\n        !forceIntoFirstElement &&\n        this._root.current.getAttribute(IS_FOCUSABLE_ATTRIBUTE) === 'true' &&\n        this._isInnerZone\n      ) {\n        const ownerZoneElement = this._getOwnerZone(this._root.current) as HTMLElement;\n\n        if (ownerZoneElement !== this._root.current) {\n          const ownerZone = _allInstances[ownerZoneElement.getAttribute(FOCUSZONE_ID_ATTRIBUTE) as string];\n\n          return !!ownerZone && ownerZone.focusElement(this._root.current);\n        }\n\n        return false;\n      } else if (\n        !forceIntoFirstElement &&\n        this._activeElement &&\n        elementContains(this._root.current, this._activeElement) &&\n        isElementTabbable(this._activeElement, undefined, this._inShadowRoot) &&\n        (!bypassHiddenElements || isElementVisibleAndNotHidden(this._activeElement))\n      ) {\n        this._activeElement.focus();\n        return true;\n      } else {\n        const firstChild = this._root.current.firstChild as HTMLElement;\n\n        return this.focusElement(\n          getNextElement(\n            this._root.current,\n            firstChild,\n            true,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            bypassHiddenElements,\n          ) as HTMLElement,\n        );\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Sets focus to the last tabbable item in the zone.\n   * @returns True if focus could be set to an active element, false if no operation was taken.\n   */\n  public focusLast(): boolean {\n    if (this._root.current) {\n      const lastChild = this._root.current && (this._root.current.lastChild as HTMLElement | null);\n\n      return this.focusElement(getPreviousElement(this._root.current, lastChild, true, true, true) as HTMLElement);\n    }\n\n    return false;\n  }\n\n  /**\n   * Sets focus to a specific child element within the zone. This can be used in conjunction with\n   * shouldReceiveFocus to create delayed focus scenarios (like animate the scroll position to the correct\n   * location and then focus.)\n   * @param element - The child element within the zone to focus.\n   * @param forceAlignment - If true, focus alignment will be set according to the element provided.\n   * @returns True if focus could be set to an active element, false if no operation was taken.\n   */\n  public focusElement(element: HTMLElement, forceAlignment?: boolean): boolean {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const { onBeforeFocus, shouldReceiveFocus } = this.props;\n\n    if ((shouldReceiveFocus && !shouldReceiveFocus(element)) || (onBeforeFocus && !onBeforeFocus(element))) {\n      return false;\n    }\n\n    if (element) {\n      // when we set focus to a specific child, we should recalculate the alignment depending on its position.\n      this._setActiveElement(element, forceAlignment);\n      if (this._activeElement) {\n        this._activeElement.focus();\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Forces horizontal alignment in the context of vertical arrowing to use specific point as the reference,\n   * rather than a center based on the last horizontal motion.\n   * @param point - the new reference point.\n   */\n  public setFocusAlignment(point: Point): void {\n    this._focusAlignment = point;\n  }\n\n  public get defaultFocusElement() {\n    return this._defaultFocusElement;\n  }\n\n  public get activeElement() {\n    return this._activeElement;\n  }\n\n  private _evaluateFocusBeforeRender(): void {\n    const { current: root } = this._root;\n\n    const doc = this._getDocument();\n    if (doc) {\n      const focusedElement = doc.activeElement as HTMLElement;\n\n      // Only update the index path if we are not parked on the root.\n      if (focusedElement !== root) {\n        const shouldRestoreFocus = elementContains(root, focusedElement, false);\n        this._lastIndexPath = shouldRestoreFocus ? getElementIndexPath(root as HTMLElement, focusedElement) : undefined;\n      }\n    }\n  }\n\n  private _onFocus = (ev: React.FocusEvent<HTMLElement>): void => {\n    if (this._portalContainsElement(ev.target as HTMLElement)) {\n      // If the event target is inside a portal do not process the event.\n      return;\n    }\n\n    const {\n      onActiveElementChanged,\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      doNotAllowFocusEventToPropagate,\n      stopFocusPropagation,\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      onFocusNotification,\n      onFocus,\n      shouldFocusInnerElementWhenReceivedFocus,\n      defaultTabbableElement,\n    } = this.props;\n    const isImmediateDescendant = this._isImmediateDescendantOfZone(ev.target as HTMLElement);\n    let newActiveElement: HTMLElement | null | undefined;\n\n    if (isImmediateDescendant) {\n      newActiveElement = ev.target as HTMLElement;\n    } else {\n      let parentElement = ev.target as HTMLElement;\n\n      while (parentElement && parentElement !== this._root.current) {\n        if (\n          isElementTabbable(parentElement, undefined, this._inShadowRoot) &&\n          this._isImmediateDescendantOfZone(parentElement)\n        ) {\n          newActiveElement = parentElement;\n          break;\n        }\n        parentElement = getParent(parentElement, ALLOW_VIRTUAL_ELEMENTS) as HTMLElement;\n      }\n    }\n\n    // If an inner focusable element should be focused when FocusZone container receives focus\n    if (shouldFocusInnerElementWhenReceivedFocus && ev.target === this._root.current) {\n      const maybeElementToFocus =\n        defaultTabbableElement &&\n        typeof defaultTabbableElement === 'function' &&\n        this._root.current &&\n        defaultTabbableElement(this._root.current);\n\n      // try to focus defaultTabbable element\n      if (maybeElementToFocus && isElementTabbable(maybeElementToFocus, undefined, this._inShadowRoot)) {\n        newActiveElement = maybeElementToFocus;\n        maybeElementToFocus.focus();\n      } else {\n        // force focus on first focusable element\n        this.focus(true);\n        if (this._activeElement) {\n          // set to null as new active element was handled in method above\n          newActiveElement = null;\n        }\n      }\n    }\n\n    const initialElementFocused = !this._activeElement;\n\n    // If the new active element is a child of this zone and received focus,\n    // update alignment an immediate descendant\n    if (newActiveElement && newActiveElement !== this._activeElement) {\n      if (isImmediateDescendant || initialElementFocused) {\n        this._setFocusAlignment(newActiveElement, true, true);\n      }\n\n      this._activeElement = newActiveElement;\n\n      if (initialElementFocused) {\n        this._updateTabIndexes();\n      }\n    }\n\n    if (onActiveElementChanged) {\n      onActiveElementChanged(this._activeElement as HTMLElement, ev);\n    }\n\n    if (stopFocusPropagation || doNotAllowFocusEventToPropagate) {\n      ev.stopPropagation();\n    }\n\n    if (onFocus) {\n      onFocus(ev);\n    } else if (onFocusNotification) {\n      onFocusNotification();\n    }\n  };\n\n  /**\n   * When focus is in the zone at render time but then all focusable elements are removed,\n   * we \"park\" focus temporarily on the root. Once we update with focusable children, we restore\n   * focus to the closest path from previous. If the user tabs away from the parked container,\n   * we restore focusability to the pre-parked state.\n   */\n  private _setParkedFocus(isParked: boolean): void {\n    const { current: root } = this._root;\n\n    if (root && this._isParked !== isParked) {\n      this._isParked = isParked;\n\n      if (isParked) {\n        if (!this.props.allowFocusRoot) {\n          this._parkedTabIndex = root.getAttribute('tabindex');\n          root.setAttribute('tabindex', '-1');\n        }\n        root.focus();\n      } else if (!this.props.allowFocusRoot) {\n        if (this._parkedTabIndex) {\n          root.setAttribute('tabindex', this._parkedTabIndex);\n          this._parkedTabIndex = undefined;\n        } else {\n          root.removeAttribute('tabindex');\n        }\n      }\n    }\n  }\n\n  private _onBlur = (): void => {\n    this._setParkedFocus(false);\n  };\n\n  private _onMouseDown = (ev: React.MouseEvent<HTMLElement>): void => {\n    if (this._portalContainsElement(ev.target as HTMLElement)) {\n      // If the event target is inside a portal do not process the event.\n      return;\n    }\n\n    const { disabled } = this.props;\n\n    if (disabled) {\n      return;\n    }\n\n    let target = ev.target as HTMLElement;\n    const path = [];\n\n    while (target && target !== this._root.current) {\n      path.push(target);\n      target = getParent(target, ALLOW_VIRTUAL_ELEMENTS) as HTMLElement;\n    }\n\n    while (path.length) {\n      target = path.pop() as HTMLElement;\n\n      if (target && isElementTabbable(target, undefined, this._inShadowRoot)) {\n        this._setActiveElement(target, true);\n      }\n\n      if (isElementFocusZone(target)) {\n        // Stop here since the focus zone will take care of its own children.\n        break;\n      }\n    }\n  };\n\n  private _setActiveElement(element: HTMLElement, forceAlignment?: boolean): void {\n    const previousActiveElement = this._activeElement;\n\n    this._activeElement = element;\n\n    if (previousActiveElement) {\n      if (isElementFocusZone(previousActiveElement)) {\n        this._updateTabIndexes(previousActiveElement);\n      }\n\n      previousActiveElement.tabIndex = -1;\n    }\n\n    if (this._activeElement) {\n      if (!this._focusAlignment || forceAlignment) {\n        this._setFocusAlignment(element, true, true);\n      }\n\n      this._activeElement.tabIndex = 0;\n    }\n  }\n\n  private _preventDefaultWhenHandled(ev: React.KeyboardEvent<HTMLElement>): void {\n    this.props.preventDefaultWhenHandled && ev.preventDefault();\n  }\n\n  /**\n   * Handle the keystrokes.\n   */\n  private _onKeyDown = (ev: React.KeyboardEvent<HTMLElement>, theme: ITheme): boolean | undefined => {\n    if (this._portalContainsElement(ev.target as HTMLElement)) {\n      // If the event target is inside a portal do not process the event.\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const { direction, disabled, isInnerZoneKeystroke, pagingSupportDisabled, shouldEnterInnerZone } = this.props;\n\n    if (disabled) {\n      return;\n    }\n\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(ev);\n    }\n\n    // If the default has been prevented, do not process keyboard events.\n    if (ev.isDefaultPrevented()) {\n      return;\n    }\n\n    if (this._getDocument().activeElement === this._root.current && this._isInnerZone) {\n      // If this element has focus, it is being controlled by a parent.\n      // Ignore the keystroke.\n      return;\n    }\n\n    if (\n      ((shouldEnterInnerZone && shouldEnterInnerZone(ev)) || (isInnerZoneKeystroke && isInnerZoneKeystroke(ev))) &&\n      this._isImmediateDescendantOfZone(ev.target as HTMLElement)\n    ) {\n      // Try to focus\n      const innerZone = this._getFirstInnerZone();\n\n      if (innerZone) {\n        if (!innerZone.focus(true)) {\n          return;\n        }\n      } else if (isElementFocusSubZone(ev.target as HTMLElement)) {\n        if (\n          !this.focusElement(\n            getNextElement(\n              ev.target as HTMLElement,\n              (ev.target as HTMLElement).firstChild as HTMLElement,\n              true,\n            ) as HTMLElement,\n          )\n        ) {\n          return;\n        }\n      } else {\n        return;\n      }\n    } else if (ev.altKey) {\n      return;\n    } else {\n      // eslint-disable-next-line @fluentui/deprecated-keyboard-event-props, @typescript-eslint/no-deprecated\n      switch (ev.which) {\n        case KeyCodes.space:\n          if (this._shouldRaiseClicksOnSpace && this._tryInvokeClickForFocusable(ev.target as HTMLElement, ev)) {\n            break;\n          }\n          return;\n\n        case KeyCodes.left:\n          if (direction !== FocusZoneDirection.vertical) {\n            this._preventDefaultWhenHandled(ev);\n            if (this._moveFocusLeft(theme)) {\n              break;\n            }\n          }\n          return;\n\n        case KeyCodes.right:\n          if (direction !== FocusZoneDirection.vertical) {\n            this._preventDefaultWhenHandled(ev);\n            if (this._moveFocusRight(theme)) {\n              break;\n            }\n          }\n          return;\n\n        case KeyCodes.up:\n          if (direction !== FocusZoneDirection.horizontal) {\n            this._preventDefaultWhenHandled(ev);\n            if (this._moveFocusUp()) {\n              break;\n            }\n          }\n          return;\n\n        case KeyCodes.down:\n          if (direction !== FocusZoneDirection.horizontal) {\n            this._preventDefaultWhenHandled(ev);\n            if (this._moveFocusDown()) {\n              break;\n            }\n          }\n          return;\n        case KeyCodes.pageDown:\n          if (!pagingSupportDisabled && this._moveFocusPaging(true)) {\n            break;\n          }\n          return;\n        case KeyCodes.pageUp:\n          if (!pagingSupportDisabled && this._moveFocusPaging(false)) {\n            break;\n          }\n          return;\n\n        case KeyCodes.tab:\n          if (\n            // eslint-disable-next-line @typescript-eslint/no-deprecated\n            this.props.allowTabKey ||\n            this.props.handleTabKey === FocusZoneTabbableElements.all ||\n            (this.props.handleTabKey === FocusZoneTabbableElements.inputOnly &&\n              this._isElementInput(ev.target as HTMLElement))\n          ) {\n            let focusChanged = false;\n            this._processingTabKey = true;\n            if (\n              direction === FocusZoneDirection.vertical ||\n              !this._shouldWrapFocus(this._activeElement as HTMLElement, NO_HORIZONTAL_WRAP)\n            ) {\n              focusChanged = ev.shiftKey ? this._moveFocusUp() : this._moveFocusDown();\n            } else {\n              const tabWithDirection = getRTL(theme) ? !ev.shiftKey : ev.shiftKey;\n              focusChanged = tabWithDirection ? this._moveFocusLeft(theme) : this._moveFocusRight(theme);\n            }\n            this._processingTabKey = false;\n            if (focusChanged) {\n              break;\n            } else if (this.props.shouldResetActiveElementWhenTabFromZone) {\n              this._activeElement = null;\n            }\n          }\n          return;\n\n        case KeyCodes.home:\n          if (\n            this._isContentEditableElement(ev.target as HTMLElement) ||\n            (this._isElementInput(ev.target as HTMLElement) &&\n              !this._shouldInputLoseFocus(ev.target as HTMLInputElement, false))\n          ) {\n            return false;\n          }\n          const firstChild = this._root.current && (this._root.current.firstChild as HTMLElement | null);\n          if (\n            this._root.current &&\n            firstChild &&\n            this.focusElement(getNextElement(this._root.current, firstChild, true) as HTMLElement)\n          ) {\n            break;\n          }\n          return;\n\n        case KeyCodes.end:\n          if (\n            this._isContentEditableElement(ev.target as HTMLElement) ||\n            (this._isElementInput(ev.target as HTMLElement) &&\n              !this._shouldInputLoseFocus(ev.target as HTMLInputElement, true))\n          ) {\n            return false;\n          }\n\n          const lastChild = this._root.current && (this._root.current.lastChild as HTMLElement | null);\n          if (\n            this._root.current &&\n            this.focusElement(getPreviousElement(this._root.current, lastChild, true, true, true) as HTMLElement)\n          ) {\n            break;\n          }\n          return;\n\n        case KeyCodes.enter:\n          if (this._shouldRaiseClicksOnEnter && this._tryInvokeClickForFocusable(ev.target as HTMLElement, ev)) {\n            break;\n          }\n          return;\n\n        default:\n          return;\n      }\n    }\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  /**\n   * Walk up the dom try to find a focusable element.\n   */\n  private _tryInvokeClickForFocusable(targetElement: HTMLElement, ev?: React.KeyboardEvent<HTMLElement>): boolean {\n    let target = targetElement;\n    if (target === this._root.current) {\n      return false;\n    }\n\n    do {\n      if (\n        target.tagName === 'BUTTON' ||\n        target.tagName === 'A' ||\n        target.tagName === 'INPUT' ||\n        target.tagName === 'TEXTAREA' ||\n        target.tagName === 'SUMMARY'\n      ) {\n        return false;\n      }\n\n      if (\n        this._isImmediateDescendantOfZone(target) &&\n        target.getAttribute(IS_FOCUSABLE_ATTRIBUTE) === 'true' &&\n        target.getAttribute(IS_ENTER_DISABLED_ATTRIBUTE) !== 'true'\n      ) {\n        raiseClickFromKeyboardEvent(target, ev);\n        return true;\n      }\n\n      target = getParent(target, ALLOW_VIRTUAL_ELEMENTS) as HTMLElement;\n    } while (target !== this._root.current);\n\n    return false;\n  }\n\n  /**\n   * Traverse to find first child zone.\n   */\n  private _getFirstInnerZone(rootElement?: HTMLElement | null): FocusZone | null {\n    rootElement = rootElement || this._activeElement || this._root.current;\n\n    if (!rootElement) {\n      return null;\n    }\n\n    if (isElementFocusZone(rootElement)) {\n      return _allInstances[rootElement.getAttribute(FOCUSZONE_ID_ATTRIBUTE) as string];\n    }\n\n    let child = rootElement.firstElementChild as HTMLElement | null;\n\n    while (child) {\n      if (isElementFocusZone(child)) {\n        return _allInstances[child.getAttribute(FOCUSZONE_ID_ATTRIBUTE) as string];\n      }\n      const match = this._getFirstInnerZone(child);\n\n      if (match) {\n        return match;\n      }\n\n      child = child.nextElementSibling as HTMLElement | null;\n    }\n\n    return null;\n  }\n\n  private _moveFocus(\n    isForward: boolean,\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    getDistanceFromCenter: (activeRect: ClientRect, targetRect: ClientRect) => number,\n    ev?: Event,\n    useDefaultWrap: boolean = true,\n  ): boolean {\n    let element = this._activeElement;\n    let candidateDistance = -1;\n    let candidateElement: HTMLElement | undefined = undefined;\n    let changedFocus = false;\n    const isBidirectional = this.props.direction === FocusZoneDirection.bidirectional;\n\n    if (!element || !this._root.current) {\n      return false;\n    }\n\n    if (this._isElementInput(element)) {\n      if (!this._shouldInputLoseFocus(element as HTMLInputElement, isForward)) {\n        return false;\n      }\n    }\n\n    const activeRect = isBidirectional ? element.getBoundingClientRect() : null;\n\n    do {\n      element = (\n        isForward ? getNextElement(this._root.current, element) : getPreviousElement(this._root.current, element)\n      ) as HTMLElement;\n\n      if (isBidirectional) {\n        if (element) {\n          const targetRect = element.getBoundingClientRect();\n          // eslint-disable-next-line @typescript-eslint/no-deprecated\n          const elementDistance = getDistanceFromCenter(activeRect as ClientRect, targetRect);\n\n          if (elementDistance === -1 && candidateDistance === -1) {\n            candidateElement = element;\n            break;\n          }\n\n          if (elementDistance > -1 && (candidateDistance === -1 || elementDistance < candidateDistance)) {\n            candidateDistance = elementDistance;\n            candidateElement = element;\n          }\n\n          if (candidateDistance >= 0 && elementDistance < 0) {\n            break;\n          }\n        }\n      } else {\n        candidateElement = element;\n        break;\n      }\n    } while (element);\n\n    // Focus the closest candidate\n    if (candidateElement && candidateElement !== this._activeElement) {\n      changedFocus = true;\n      this.focusElement(candidateElement);\n    } else if (this.props.isCircularNavigation && useDefaultWrap) {\n      if (isForward) {\n        return this.focusElement(\n          getNextElement(this._root.current, this._root.current.firstElementChild as HTMLElement, true) as HTMLElement,\n        );\n      } else {\n        return this.focusElement(\n          getPreviousElement(\n            this._root.current,\n            this._root.current.lastElementChild as HTMLElement,\n            true,\n            true,\n            true,\n          ) as HTMLElement,\n        );\n      }\n    }\n\n    return changedFocus;\n  }\n\n  private _moveFocusDown(): boolean {\n    let targetTop = -1;\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const leftAlignment = this._focusAlignment.left || this._focusAlignment.x || 0;\n\n    if (\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      this._moveFocus(true, (activeRect: ClientRect, targetRect: ClientRect) => {\n        let distance = -1;\n        // ClientRect values can be floats that differ by very small fractions of a decimal.\n        // If the difference between top and bottom are within a pixel then we should treat\n        // them as equivalent by using Math.floor. For instance 5.2222 and 5.222221 should be equivalent,\n        // but without Math.Floor they will be handled incorrectly.\n        const targetRectTop = Math.floor(targetRect.top);\n        const activeRectBottom = Math.floor(activeRect.bottom);\n\n        if (targetRectTop < activeRectBottom) {\n          if (!this._shouldWrapFocus(this._activeElement as HTMLElement, NO_VERTICAL_WRAP)) {\n            return LARGE_NEGATIVE_DISTANCE_FROM_CENTER;\n          }\n\n          return LARGE_DISTANCE_FROM_CENTER;\n        }\n\n        if ((targetTop === -1 && targetRectTop >= activeRectBottom) || targetRectTop === targetTop) {\n          targetTop = targetRectTop;\n          if (leftAlignment >= targetRect.left && leftAlignment <= targetRect.left + targetRect.width) {\n            distance = 0;\n          } else {\n            distance = Math.abs(targetRect.left + targetRect.width / 2 - leftAlignment);\n          }\n        }\n\n        return distance;\n      })\n    ) {\n      this._setFocusAlignment(this._activeElement as HTMLElement, false, true);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _moveFocusUp(): boolean {\n    let targetTop = -1;\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const leftAlignment = this._focusAlignment.left || this._focusAlignment.x || 0;\n\n    if (\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      this._moveFocus(false, (activeRect: ClientRect, targetRect: ClientRect) => {\n        let distance = -1;\n        // ClientRect values can be floats that differ by very small fractions of a decimal.\n        // If the difference between top and bottom are within a pixel then we should treat\n        // them as equivalent by using Math.floor. For instance 5.2222 and 5.222221 should be equivalent,\n        // but without Math.Floor they will be handled incorrectly.\n        const targetRectBottom = Math.floor(targetRect.bottom);\n        const targetRectTop = Math.floor(targetRect.top);\n        const activeRectTop = Math.floor(activeRect.top);\n\n        if (targetRectBottom > activeRectTop) {\n          if (!this._shouldWrapFocus(this._activeElement as HTMLElement, NO_VERTICAL_WRAP)) {\n            return LARGE_NEGATIVE_DISTANCE_FROM_CENTER;\n          }\n          return LARGE_DISTANCE_FROM_CENTER;\n        }\n\n        if ((targetTop === -1 && targetRectBottom <= activeRectTop) || targetRectTop === targetTop) {\n          targetTop = targetRectTop;\n          if (leftAlignment >= targetRect.left && leftAlignment <= targetRect.left + targetRect.width) {\n            distance = 0;\n          } else {\n            distance = Math.abs(targetRect.left + targetRect.width / 2 - leftAlignment);\n          }\n        }\n\n        return distance;\n      })\n    ) {\n      this._setFocusAlignment(this._activeElement as HTMLElement, false, true);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _moveFocusLeft(theme: ITheme): boolean {\n    const shouldWrap = this._shouldWrapFocus(this._activeElement as HTMLElement, NO_HORIZONTAL_WRAP);\n    if (\n      this._moveFocus(\n        getRTL(theme),\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n        (activeRect: ClientRect, targetRect: ClientRect) => {\n          let distance = -1;\n          let topBottomComparison;\n\n          if (getRTL(theme)) {\n            // When in RTL, this comparison should be the same as the one in _moveFocusRight for LTR.\n            // Going left at a leftmost rectangle will go down a line instead of up a line like in LTR.\n            // This is important, because we want to be comparing the top of the target rect\n            // with the bottom of the active rect.\n            topBottomComparison = parseFloat(targetRect.top.toFixed(3)) < parseFloat(activeRect.bottom.toFixed(3));\n          } else {\n            topBottomComparison = parseFloat(targetRect.bottom.toFixed(3)) > parseFloat(activeRect.top.toFixed(3));\n          }\n\n          if (\n            topBottomComparison &&\n            targetRect.right <= activeRect.right &&\n            this.props.direction !== FocusZoneDirection.vertical\n          ) {\n            distance = activeRect.right - targetRect.right;\n          } else if (!shouldWrap) {\n            distance = LARGE_NEGATIVE_DISTANCE_FROM_CENTER;\n          }\n\n          return distance;\n        },\n        undefined /*ev*/,\n        shouldWrap,\n      )\n    ) {\n      this._setFocusAlignment(this._activeElement as HTMLElement, true, false);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _moveFocusRight(theme: ITheme): boolean {\n    const shouldWrap = this._shouldWrapFocus(this._activeElement as HTMLElement, NO_HORIZONTAL_WRAP);\n    if (\n      this._moveFocus(\n        !getRTL(theme),\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n        (activeRect: ClientRect, targetRect: ClientRect) => {\n          let distance = -1;\n          let topBottomComparison;\n\n          if (getRTL(theme)) {\n            // When in RTL, this comparison should be the same as the one in _moveFocusLeft for LTR.\n            // Going right at a rightmost rectangle will go up a line instead of down a line like in LTR.\n            // This is important, because we want to be comparing the bottom of the target rect\n            // with the top of the active rect.\n            topBottomComparison = parseFloat(targetRect.bottom.toFixed(3)) > parseFloat(activeRect.top.toFixed(3));\n          } else {\n            topBottomComparison = parseFloat(targetRect.top.toFixed(3)) < parseFloat(activeRect.bottom.toFixed(3));\n          }\n\n          if (\n            topBottomComparison &&\n            targetRect.left >= activeRect.left &&\n            this.props.direction !== FocusZoneDirection.vertical\n          ) {\n            distance = targetRect.left - activeRect.left;\n          } else if (!shouldWrap) {\n            distance = LARGE_NEGATIVE_DISTANCE_FROM_CENTER;\n          }\n\n          return distance;\n        },\n        undefined /*ev*/,\n        shouldWrap,\n      )\n    ) {\n      this._setFocusAlignment(this._activeElement as HTMLElement, true, false);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _getHorizontalDistanceFromCenter = (\n    isForward: boolean,\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    activeRect: ClientRect,\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    targetRect: ClientRect,\n  ): number => {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    const leftAlignment = this._focusAlignment.left || this._focusAlignment.x || 0;\n    // ClientRect values can be floats that differ by very small fractions of a decimal.\n    // If the difference between top and bottom are within a pixel then we should treat\n    // them as equivalent by using Math.floor. For instance 5.2222 and 5.222221 should be equivalent,\n    // but without Math.Floor they will be handled incorrectly.\n    const targetRectTop = Math.floor(targetRect.top);\n    const activeRectBottom = Math.floor(activeRect.bottom);\n    const targetRectBottom = Math.floor(targetRect.bottom);\n    const activeRectTop = Math.floor(activeRect.top);\n    const isValidCandidateOnpagingDown = isForward && targetRectTop > activeRectBottom;\n    const isValidCandidateOnpagingUp = !isForward && targetRectBottom < activeRectTop;\n\n    if (isValidCandidateOnpagingDown || isValidCandidateOnpagingUp) {\n      if (leftAlignment >= targetRect.left && leftAlignment <= targetRect.left + targetRect.width) {\n        return 0;\n      }\n      return Math.abs(targetRect.left + targetRect.width / 2 - leftAlignment);\n    }\n\n    if (!this._shouldWrapFocus(this._activeElement as HTMLElement, NO_VERTICAL_WRAP)) {\n      return LARGE_NEGATIVE_DISTANCE_FROM_CENTER;\n    }\n    return LARGE_DISTANCE_FROM_CENTER;\n  };\n\n  private _moveFocusPaging(isForward: boolean, useDefaultWrap: boolean = true): boolean {\n    let element = this._activeElement;\n    if (!element || !this._root.current) {\n      return false;\n    }\n    if (this._isElementInput(element)) {\n      if (!this._shouldInputLoseFocus(element as HTMLInputElement, isForward)) {\n        return false;\n      }\n    }\n    const scrollableParent = findScrollableParent(element);\n    if (!scrollableParent) {\n      return false;\n    }\n    let candidateDistance = -1;\n    let candidateElement = undefined;\n    let targetTop = -1;\n    let targetBottom = -1;\n    const pagesize = (scrollableParent as HTMLElement).clientHeight;\n    const activeRect = element.getBoundingClientRect();\n    do {\n      element = isForward\n        ? getNextElement(this._root.current, element)\n        : getPreviousElement(this._root.current, element);\n      if (element) {\n        const targetRect = element.getBoundingClientRect();\n        const targetRectTop = Math.floor(targetRect.top);\n        const activeRectBottom = Math.floor(activeRect.bottom);\n        const targetRectBottom = Math.floor(targetRect.bottom);\n        const activeRectTop = Math.floor(activeRect.top);\n        const elementDistance = this._getHorizontalDistanceFromCenter(isForward, activeRect, targetRect);\n        const isElementPassedPageSizeOnPagingDown = isForward && targetRectTop > activeRectBottom + pagesize;\n        const isElementPassedPageSizeOnPagingUp = !isForward && targetRectBottom < activeRectTop - pagesize;\n\n        if (isElementPassedPageSizeOnPagingDown || isElementPassedPageSizeOnPagingUp) {\n          break;\n        }\n        if (elementDistance > -1) {\n          // for paging down\n          if (isForward && targetRectTop > targetTop) {\n            targetTop = targetRectTop;\n            candidateDistance = elementDistance;\n            candidateElement = element;\n          } else if (!isForward && targetRectBottom < targetBottom) {\n            // for paging up\n            targetBottom = targetRectBottom;\n            candidateDistance = elementDistance;\n            candidateElement = element;\n          } else if (candidateDistance === -1 || elementDistance <= candidateDistance) {\n            candidateDistance = elementDistance;\n            candidateElement = element;\n          }\n        }\n      }\n    } while (element);\n\n    let changedFocus = false;\n    // Focus the closest candidate\n    if (candidateElement && candidateElement !== this._activeElement) {\n      changedFocus = true;\n      this.focusElement(candidateElement);\n      this._setFocusAlignment(candidateElement as HTMLElement, false, true);\n    } else if (this.props.isCircularNavigation && useDefaultWrap) {\n      if (isForward) {\n        return this.focusElement(\n          getNextElement(this._root.current, this._root.current.firstElementChild as HTMLElement, true) as HTMLElement,\n        );\n      }\n      return this.focusElement(\n        getPreviousElement(\n          this._root.current,\n          this._root.current.lastElementChild as HTMLElement,\n          true,\n          true,\n          true,\n        ) as HTMLElement,\n      );\n    }\n    return changedFocus;\n  }\n\n  private _setFocusAlignment(element: HTMLElement, isHorizontal?: boolean, isVertical?: boolean): void {\n    if (\n      this.props.direction === FocusZoneDirection.bidirectional &&\n      (!this._focusAlignment || isHorizontal || isVertical)\n    ) {\n      const rect = element.getBoundingClientRect();\n      const left = rect.left + rect.width / 2;\n      const top = rect.top + rect.height / 2;\n\n      if (!this._focusAlignment) {\n        this._focusAlignment = { left, top };\n      }\n\n      if (isHorizontal) {\n        this._focusAlignment.left = left;\n      }\n\n      if (isVertical) {\n        this._focusAlignment.top = top;\n      }\n    }\n  }\n\n  private _isImmediateDescendantOfZone(element?: HTMLElement): boolean {\n    return this._getOwnerZone(element) === this._root.current;\n  }\n\n  private _getOwnerZone(element?: HTMLElement): HTMLElement | null {\n    let parentElement = getParent(element as HTMLElement, ALLOW_VIRTUAL_ELEMENTS);\n\n    while (parentElement && parentElement !== this._root.current && parentElement !== this._getDocument().body) {\n      if (isElementFocusZone(parentElement)) {\n        return parentElement;\n      }\n\n      parentElement = getParent(parentElement, ALLOW_VIRTUAL_ELEMENTS);\n    }\n\n    return parentElement;\n  }\n\n  private _updateTabIndexes(element?: HTMLElement): void {\n    if (\n      !this._activeElement &&\n      this.props.defaultTabbableElement &&\n      typeof this.props.defaultTabbableElement === 'function'\n    ) {\n      this._activeElement = this.props.defaultTabbableElement(this._root.current as HTMLElement);\n    }\n\n    if (!element && this._root.current) {\n      this._defaultFocusElement = null;\n      element = this._root.current;\n      if (this._activeElement && !elementContains(element, this._activeElement)) {\n        this._activeElement = null;\n      }\n    }\n\n    // If active element changes state to disabled, set it to null.\n    // Otherwise, we lose keyboard accessibility to other elements in focus zone.\n    if (this._activeElement && !isElementTabbable(this._activeElement, undefined, this._inShadowRoot)) {\n      this._activeElement = null;\n    }\n\n    const childNodes = element && element.children;\n\n    for (let childIndex = 0; childNodes && childIndex < childNodes.length; childIndex++) {\n      const child = childNodes[childIndex] as HTMLElement;\n\n      if (!isElementFocusZone(child)) {\n        // If the item is explicitly set to not be focusable then TABINDEX needs to be set to -1.\n        if (child.getAttribute && child.getAttribute(IS_FOCUSABLE_ATTRIBUTE) === 'false') {\n          child.setAttribute(TABINDEX, '-1');\n        }\n\n        if (isElementTabbable(child, undefined, this._inShadowRoot)) {\n          if (this.props.disabled) {\n            child.setAttribute(TABINDEX, '-1');\n          } else if (\n            !this._isInnerZone &&\n            ((!this._activeElement && !this._defaultFocusElement) || this._activeElement === child)\n          ) {\n            this._defaultFocusElement = child;\n            if (child.getAttribute(TABINDEX) !== '0') {\n              child.setAttribute(TABINDEX, '0');\n            }\n          } else if (child.getAttribute(TABINDEX) !== '-1') {\n            child.setAttribute(TABINDEX, '-1');\n          }\n        } else if (child.tagName === 'svg' && child.getAttribute('focusable') !== 'false') {\n          // Disgusting IE hack. Sad face.\n          child.setAttribute('focusable', 'false');\n        }\n      } else if (child.getAttribute(IS_FOCUSABLE_ATTRIBUTE) === 'true') {\n        if (\n          !this._isInnerZone &&\n          ((!this._activeElement && !this._defaultFocusElement) || this._activeElement === child)\n        ) {\n          this._defaultFocusElement = child;\n          if (child.getAttribute(TABINDEX) !== '0') {\n            child.setAttribute(TABINDEX, '0');\n          }\n        } else if (child.getAttribute(TABINDEX) !== '-1') {\n          child.setAttribute(TABINDEX, '-1');\n        }\n      }\n\n      this._updateTabIndexes(child);\n    }\n  }\n\n  private _isContentEditableElement(element: HTMLElement): boolean {\n    return element && element.getAttribute('contenteditable') === 'true';\n  }\n\n  private _isElementInput(element: HTMLElement): boolean {\n    if (\n      element &&\n      element.tagName &&\n      (element.tagName.toLowerCase() === 'input' || element.tagName.toLowerCase() === 'textarea')\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  private _shouldInputLoseFocus(element: HTMLInputElement | HTMLTextAreaElement, isForward?: boolean): boolean {\n    // If a tab was used, we want to focus on the next element.\n    if (\n      !this._processingTabKey &&\n      element &&\n      element.type &&\n      ALLOWED_INPUT_TYPES.indexOf(element.type.toLowerCase()) > -1\n    ) {\n      const selectionStart = element.selectionStart;\n      const selectionEnd = element.selectionEnd;\n      const isRangeSelected = selectionStart !== selectionEnd;\n      const inputValue = element.value;\n      const isReadonly = element.readOnly;\n\n      // We shouldn't lose focus in the following cases:\n      // 1. There is range selected.\n      // 2. When selection start is larger than 0 and it is backward and not readOnly.\n      // 3. when selection start is not the end of length, it is forward and not readOnly.\n      // 4. We press any of the arrow keys when our handleTabKey isn't none or undefined (only losing focus if we hit\n      // tab) and if shouldInputLoseFocusOnArrowKey is defined, if scenario prefers to not loose the focus which is\n      // determined by calling the callback shouldInputLoseFocusOnArrowKey\n      if (\n        isRangeSelected ||\n        (selectionStart! > 0 && !isForward && !isReadonly) ||\n        (selectionStart !== inputValue.length && isForward && !isReadonly) ||\n        (!!this.props.handleTabKey &&\n          !(this.props.shouldInputLoseFocusOnArrowKey && this.props.shouldInputLoseFocusOnArrowKey(element)))\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  private _shouldWrapFocus(\n    element: HTMLElement,\n    noWrapDataAttribute: 'data-no-vertical-wrap' | 'data-no-horizontal-wrap',\n  ): boolean {\n    return this.props.checkForNoWrap ? shouldWrapFocus(element, noWrapDataAttribute) : true;\n  }\n\n  /**\n   * Returns true if the element is a descendant of the FocusZone through a React portal.\n   */\n  private _portalContainsElement(element: HTMLElement): boolean {\n    return element && !!this._root.current && portalContainsElement(element, this._root.current);\n  }\n\n  private _getDocument(): Document {\n    return getDocument(this._root.current)!;\n  }\n}\n"]}